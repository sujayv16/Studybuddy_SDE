<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720" viewBox="0 0 1280 720">
  <defs>
    <style>
      .bg { fill: #eaf2ff; }
      .card { fill: #ffffff; stroke: #dbe7ff; stroke-width: 2; rx: 12; }
      .title { font: 700 20px system-ui; fill: #0b1220; }
      .subtitle { font: 600 16px system-ui; fill: #2563eb; }
      .text { font: 14px system-ui; fill: #0b1220; }
      .muted { font: 12px system-ui; fill: #6b7280; }
      .edge { stroke: #2563eb; stroke-width: 2.5; marker-end: url(#arrow); fill: none; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,3 L0,6 z" fill="#2563eb" />
    </marker>
  </defs>
  <rect class="bg" x="0" y="0" width="1280" height="720"/>
  <text class="title" x="40" y="56">Backend Layers (Layered Architecture + MVC mapping)</text>

  <!-- HTTP/Transport Layer -->
  <rect class="card" x="60" y="100" width="360" height="160"/>
  <text class="subtitle" x="80" y="130">Transport / Presentation</text>
  <text class="text" x="80" y="160">Express Routes (Controllers)</text>
  <text class="muted" x="80" y="185">backend/routes/*.js</text>

  <!-- Domain/Application Layer -->
  <rect class="card" x="460" y="100" width="360" height="240"/>
  <text class="subtitle" x="480" y="130">Application / Domain</text>
  <text class="text" x="480" y="160">Auth logic (hybrid + migration)</text>
  <text class="muted" x="480" y="180">backend/routes/users.js</text>
  <text class="text" x="480" y="210">Password utils (bcrypt)</text>
  <text class="muted" x="480" y="230">backend/utils/password.js</text>
  <text class="text" x="480" y="260">Cross-cutting: logging, validation, rate limit</text>
  <text class="muted" x="480" y="280">backend/middlewares/*, logging/*</text>

  <!-- Data Layer -->
  <rect class="card" x="860" y="100" width="360" height="200"/>
  <text class="subtitle" x="880" y="130">Data / Persistence</text>
  <text class="text" x="880" y="160">Mongoose Models (Active Record-ish)</text>
  <text class="muted" x="880" y="185">backend/*.model.js</text>
  <text class="text" x="880" y="210">Sessions (connect-mongo)</text>

  <!-- Realtime -->
  <rect class="card" x="60" y="300" width="360" height="140"/>
  <text class="subtitle" x="80" y="330">Realtime (Socket.IO)</text>
  <text class="text" x="80" y="360">Namespaces: /chat</text>
  <text class="muted" x="80" y="385">backend/sockets/*.js, backend/io.js</text>

  <!-- Ops -->
  <rect class="card" x="460" y="360" width="360" height="180"/>
  <text class="subtitle" x="480" y="390">Operability</text>
  <text class="text" x="480" y="420">/healthz, /readyz, /status</text>
  <text class="muted" x="480" y="445">backend/routes/health.js</text>
  <text class="text" x="480" y="470">/metrics (Prometheus)</text>
  <text class="muted" x="480" y="495">backend/app.js</text>

  <!-- Arrows -->
  <path class="edge" d="M420,180 C440,180 460,180 460,180"/>
  <path class="edge" d="M820,200 C840,200 860,200 860,200"/>
</svg>
